---
title: Hexo + GitHub 个人博客搭建教程
date: 2020-12-13 23:03:34
tags:
---
<!-- # Hexo + GitHub 个人博客搭建教程 -->


本文主要介绍了基于 `Hexo` + `GitHub Pages` 快速搭建一套自己的个人博客框架。
方便平时整理和记录下日常开发遇到的bug以及学习心得分享。

搭建主要分三步：
1. 使用 `GitHub Pages` 轻量级的个人博客服务(提供免费的静态页面的托管服务)
2. 使用 `Hexo` 搭建博客框架（静态站点生成框架），实现生成网页和自动部署
3. 购买个人域名，方便访问以及打造个人博客(装逼)

-------

## <span id="jumpto1">[1. GitHub Pages](#1)</span>

这里就不讲解如何使用 `GitHub` 了。太基础了，我们直接进入正题。

### [1.1 创建托管仓库](#1.1)

登陆 GitHub 账号，并在个人主界面里选择创建一个新的 Repository， 命名为 `username.github.io`,比如我的 username 是 miaogs ，那么这里我就应该填写 `miaogs.github.io` 。

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7pknhnj31040u0n4a.jpg)

这里因为我已经创建了。所以无法再次创建。

### [1.2 选择一个 GitHub 官方提供的主题](#1.2)

创建成功之后，点击右上角的 `Settings` ，找到 `GitHub Pages` 选项，点击 `choose a theme` ， 选择一个 `GitHub` 官方提供的主题

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7qasryj316q0u0wl3.jpg)

这里我们就随意选择一个主题 `MINIMAL` ，来看看他的效果是什么样的。

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7r54kdj318b0u013r.jpg)

选择完毕之后 `GitHub Pages` 就会自动帮你生成好网站 `http://<username>.github.io` ， 比如这里我就可以直接访问：
>> miaogs.github.io

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7s7smpj31c00u048a.jpg)

## <span id="jumpto2">[2. Hexo](#2) </span>

### [2.1 Hexo 简介](#2.1)

[`Hexo`](https://hexo.io/zh-cn/) 是一个快速, 简洁且高效的博客框架。

`Hexo` 是基于 `Node.js` 的高效的静态站点生成框架。 通过 `Hexo` 可以轻松地使用 `Markdown` 编写文章，除了 `Markdown` 本身的语法之外，还可以使用 `Hexo` 提供的 [标签插件](https://hexo.io/zh-cn/docs/tag-plugins.html) 来快速的插入特定形式的内容。

具有以下4个特点(摘自官网)：

- 超快速度 : `Node.js` 所带来的超快生成速度，让上百个页面在几秒内瞬间完成渲染。
- 支持 `Markdown` : `Hexo` 支持 `GitHub Flavored Markdown` 的所有功能，甚至可以整合 `Octopress` 的大多数插件。
- 一键部署 : 只需一条指令即可部署到 `GitHub Pages` , `Heroku` 或其他平台。
- 插件和可扩展性 : 强大的 `API` 带来无限的可能，与数种模板引擎（ `EJS` ， `Pug` ， `Nunjucks` ）和工具（ `Babel` ， `PostCSS` ， `Less/Sass` ）轻易集成。



### [2.2 Hexo 安装](#2.2)

根据上面的文字我们可以看出， Hexo 依赖 `Node.js` , 所以我们需要安装 `npm` `工具，npm` 是 `Node.js` 安装包的工具。

#### [2.2.1 Linux 安装](#2.2.1)

1. 使用apt-get安装 nodejs

    `sudo apt-get install -y nodejs`

2. 安装 npm

    `sudo apt-get install npm`

3. 安装 Hexo

    `sudo npm install hexo-cli -g`

#### [2.2.2 Mac 安装](#2.2.2)

1. 使用apt-get安装 nodejs

    `brew install nodejs`

2. 安装 npm

    `brew install npm`

3. 安装 Hexo

    `npm install hexo-cli -g`

### [2.3 创建一个简单的 blog](#2.3)

1. 初始化

    `hexo init bolgtest`

如果直接 `hexo init` 就会在当前目录进行初始化. 如果后面跟了名子就会创建目录并在目录进行初始化操作, 以这个名子为目录名。

2. 简单运行

```
cd blog
npm install
hexo s # hexo server
```

执行 `hexo s` 命令之后，一般会看到类似log。
关于这个命令更多说明可以参考官网 [Server](https://hexo.io/docs/server.html)。

```
➜  blog hexo s
INFO  Validating config
INFO  Start processing
INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.
```

所以，我们打开浏览器再地址栏输入： `http://localhost:4000` ,可以看到我们刚刚创建的 blog 首页。

###  <span id="jumpto24">[2.4 安装部署使用到的Git插件](#2.4)</span>

根据官方的文档显示，现在 `Hexo` 支持 `Git` 、 `Heroku` 、 `Rsync` 、 `OpenShift` 、 `FTPSync` 等部署方式，

在这里我使用的是 `Git` 源码管理工具, 所以, 我需要安装 `Git` 包进行部署, 安装这个插件才能使用 `Git` 进行自动部署。在 [2.6 网站自部署到Github上](#jumpto26) 中我们会使用到。

`npm install hexo-deployer-git --save`

###  <span id="jumpto25">[2.5 生成网站](#2.5)</span>

当我们部署网站前, 需要先生成静态网站. 它会自动在目录下创建 `public` 的目录, 并将新生成的网页存放在这个目录里.

`hexo generate`

进行自动部署网站, 注意部署前需要重新生成网站, 每一次修改后都需要重新生成网站并进行部署。关于这个命令更多说明可以参考官网 [Generating](https://hexo.io/docs/generating.html)。

###  <span id="jumpto26">[2.6 网站自部署到Github上](#2.6)</span>

修改 `blog` 目录下的 `_config.yml` 配置文件将网站自部署到Github上.

打开 站点配置文件 `_config.yml`   

`vim _config.yml`

比如在最后一行添加： 

`deploy: type: git repo: https://github.com/github-name/github-name.github.io.git branch: master`

这里的 type 使用的是 Git ，因为我们在 [2.4 安装部署使用到的Git插件](#jumpto24) 设置的部署使用到的插件就是 `Git` . 

关于 `GitHub` 如何使用后面[ 3.1 Hexo 部署 ](#3.1) 讲解。这里只是提一下，让大家有个概念。

注意在 type 前面需要增加两个空格, 在 type 的冒号后面需要增加一个空格. 请保持代码风格一致. 否则会出现错误或是不正确的问题.


更多的实践可以参考 
- [Hexo官方API(中文)](https://hexo.io/zh-cn/api/) 
- [Hexo官方文档(中文)](https://hexo.io/zh-cn/docs/)


## [3. 博客部署](#3)

上面我们已经讲解了 [1. GitHub Pages](#jumpto1) 和 [2. Hexo](#jumpto2) 的基本用法。

通过 hexo server 搭建在本地的一个临时服务器，只有自己通过 `http://localhost:4000` 才能访问到。

现在我们进阶一下。

如果你想要把自己的博客发布的互联网上，可以随时访问，就需要利用一个服务器来部署你的博客。

Hexo 是基于静态页面的博客系统，意味着对服务器的要求可以非常的低。而 Github 和 Coding.net 就提供了免费的静态页面的托管服务，例如 GitHub Pages , 我们也就正好可以利用这个特性把我们的博客部署到这个网站上面。

这样，我再次访问 `http://<username>.github.io` ，就是 `http://localhost:4000` 的内容。

### <span id="jumpto31">[3.1 Hexo 部署](#3.1)</span> 

我们再次来看下我们上面创建的 `blogtext` 根目录下的站点配置文件 `_config.yml` 。

`vim  _config,yml` 

文件内容比较多，我们后面很针对这个文件进行多次配置，这里先看最后几行。

```
# Deployment
## Docs: https://hexo.io/docs/one-command-deployment
deploy:
  type: ''
```
这里我们可以有以下几项配置：

```
  type: git
  repo: <repository url>
  branch: [branch]
  message: [message]
```

结合我们在[2.4 安装部署使用到的Git插件](#2.4) 和 [2.6 网站自部署到Github上](#2.6) 的介绍, type 设置为 git。

`repo` 设置的是你的仓库地址，推荐使用 `SSH` 加密的仓库地址
`branch` 和 `message` 可以暂时不填写，默认推送到 `master` 分支。 

需要注意的是，这里的 `repo`、`branch` 和 `message` 与 `type` 一样，前面都是必须保留两个空格的。

这里我填写的是：

```
deploy:
  type: git
  repo: git@github.com:miaogs/miaogs.github.io.git
  branch:
  message:
```

执行命令： `hexo g -d`  

也可以分开执行,比较好理解：

```
hexo generate
hexo deploy
```

关于 `hexo deploy` 这个命令更多说明可以参考官网 [Deployment](https://hexo.io/docs/one-command-deployment.html)。

截取部分运行日志：

```
Enumerating objects: 34, done.
Counting objects: 100% (34/34), done.
Delta compression using up to 8 threads
Compressing objects: 100% (26/26), done.
Writing objects: 100% (34/34), 882.38 KiB | 1.01 MiB/s, done.
Total 34 (delta 4), reused 0 (delta 0)
remote: Resolving deltas: 100% (4/4), done.
remote: 
remote: Create a pull request for 'master' on GitHub by visiting:
remote:      https://github.com/miaogs/miaogs.github.io/pull/new/master
remote: 
To github.com:miaogs/miaogs.github.io.git
 * [new branch]      HEAD -> master
Branch 'master' set up to track remote branch 'master' from 'git@github.com:miaogs/miaogs.github.io.git'.
INFO  Deploy done: git
```
从这部分日志，我们可以看到，已经把博客部署到 `GitHub` 了。

另外，这里执行的时候如果遇到设置 `user.name` 和 `user.email`，应该是 当前系统中没有没有配置 `Git` 相关的参数，大家可以自行设置一下本地或者全局的 `Git` 相关参数，这里就不展开了。

最后一步，打开 `GitHub` 上的这个 `Repo` ，从 `Setting` 进入到 `GitHub Pages` 设置一下 `Branch` ，因为 `GitHub` 默认设置的是 `mian` ,这里修改为 `master` 保存一下就好。

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7sz6ifj31i60saaeq.jpg)
现在，所有人都可以通过 `http://<username>.github.io` 来访问自己的博客。

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7tkwokj31c00u0b29.jpg)


### <span id="junpto32">[3.2 选择主题](#3.2)</span>

在 [3.1 Hexo 部署](#jumpto31) 中已经可以看到我们基于 `Hexo` 部署到 `GitHub Pages` 的博客了。但是界面太丑了。所以，这一节我需要更换一下主题。
可以去 `Github` 上搜索 `hexo theme` 或者使用 `Hexo` 官方网站上精选的主题 [Hexo theme](https://hexo.io/themes/)。


这里我直接选择在 `GitHub` 上了搜了下 `hexo theme` ，我就直接选用了 `star` 排行榜第一的主题 [hexo-theme-next](https://github.com/iissnan/hexo-theme-next)。

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7ui0ynj31c00u04aw.jpg)  




或者直接打开[NexT官方网站](http://theme-next.iissnan.com/).

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7ux5d4j31c00u0ke1.jpg)

[安装 NexT ](http://theme-next.iissnan.com/getting-started.html) 主题的方法很简单，大家可以直接参考。

这里我就直接安装了。

1. 下载主题

```
cd hexotext
git clone https://github.com/iissnan/hexo-theme-next themes/next
```
### <span id="junpto321">[2. 启用主题](#3.2.1)</span>

2. 启用主题

修改站点配置文件 `_config.yml`


```
vim  _config.yml
```

修改 `theme` 字段为 `next` ：

```
# Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
theme: next
```

到此， `NexT` 主题安装完成。下一步我们将验证主题是否正确启用。在切换主题之后、验证之前， 我们最好使用 `hexo clean` 来清除 `Hexo` 的缓存。

3. 验证主题

首先启动 `Hexo` 本地站点，并开启调试模式（即加上 `--debug` ），整个命令是 `hexo s --debug`。 在服务启动的过程，注意观察命令行输出是否有任何异常信息，如果你碰到问题，这些信息将帮助他人更好的定位错误。 当命令行输出中提示出：

`INFO  Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.`

此时即可使用浏览器访问 `http://localhost:4000` ，检查站点是否正确运行。

当你看到站点的外观与下图所示类似时即说明你已成功安装 `NexT` 主题。这是 `NexT` 默认的 `Scheme —— Muse`

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7vu8ijj31c00u0jws.jpg)


### <span id="junpto33">[3.3 主题设定](#3.3)</span>

#### [3.3.1 选择 Scheme](#3.3.1)

`Scheme` 是 `NexT` 提供的一种特性，借助于 `Scheme` ， `NexT` 为你提供多种不同的外观。同时，几乎所有的配置都可以 在 `Scheme` 之间共用。目前 `NexT` 支持三种 `Scheme` ，他们是：

- `Muse` - 默认 `Scheme` ，这是 `NexT` 最初的版本，黑白主调，大量留白
- `Mist` - `Muse` 的紧凑版本，整洁有序的单栏外观
- `Pisces` - 双栏 `Scheme` ，小家碧玉似的清新

`Scheme` 的切换通过更改 主题配置文件( `/theme/next/_config.yml` , 不是根目录下的站点配置文件 `_config.yml` ) ，搜索 `scheme` 关键字。 你会看到有三行 `scheme` 的配置，将你需用启用的 `scheme` 前面注释 `#` 去除即可.

```
# Schemes
#scheme: Muse
#scheme: Mist
scheme: Pisces
#scheme: Gemini
```

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7wcegcj31c00u0458.jpg)

<center style="font-size:14px;color:#C0C0C0;text-decoration:underline">这里我选择 Pisces </center>

#### [3.3.2 设置语言](#3.3.2)

虽然之前给大家展示的页面都是中文简体的，但是这里建议大家将主题配置文件( `/theme/next/_config.yml` )中的 `language` 指定为中文简体 `zh-Hans`

`language: zh-Hans`


后面的 设置语言、菜单、侧栏 、头像、作者昵称、站点描述等，大家可以直接 `follow` [官网示例](http://theme-next.iissnan.com/getting-started.html) ，这里就不再说明了。

最终，我的博客基本界面如下：

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7wszdaj31c00u0tij.jpg)


## [4. 撰写博客文章](#4)

这部分就是比较简单，大家可以直接参考 `Hexo` 官网 [Wirting](https://hexo.io/docs/writing.html)。 

关于在 `Markdown` 中添加图片，我个人比较推荐不要使用本地引用，推荐使用图床外链。  
这样做的好处是避免网站部署和浏览访问博客慢。  
图床网站有阿里云OSS、贴图库、七牛云等等。  
但是我这里使用的是 [iPic](https://toolinbox.net/iPic/) ,一键转换，真的很方便。


## FAQ 

### 1. 执行 hexo 命令 出现 `Plugin load failed：*` 的问题

在 [3.2 选择主题](#jump32) 的 [2. 启用主题](#jump321)中，执行 `hexo clean`之后出现以下错误：

```
➜  blog hexo clean
INFO  Validating config
ERROR {
  err: [Error: EISDIR: illegal operation on a directory, read] {
    errno: -21,
    code: 'EISDIR',
    syscall: 'read'
  }
} Plugin load failed: %s hexo-theme-landscape
```

意思是在 根目录下的 `package.json` 文件中记录了当前hexo的依赖，但是名字为 `hexo-theme-landscape` 的这个插件加载失败了。

因为这里我们也不是这个 `landscape` 这个主题了，可以将这一行连同前面的逗号 `,` 一起删除。

然后，执行 hexo clean 是没有报错了，接着我执行 `hexo s  --debug` 的时候发现 `http://localhost:4000`。

网页显示的是个什么玩意？？

**卧槽！！！**

![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7x9kpej31c00u07a0.jpg)


仔细研究了一下 `hexo` ，原来是 `Hexo5.0` 之后把 `swig` 给删除了，这里我们自己手动安装一下吧。

`npm -i hexo-renderer-swig`

重新执行 `hexo s`

`http://localhost:4000` 上可以看到我们想要的了。


![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7xphb2j31c00u0gr0.jpg)

如果执行了 [3.1 Hexo 部署](#jumpto31) ,那么 `username.github.io` 上也可以正常显示。


![avatar](https://tva1.sinaimg.cn/large/0081Kckwly1glmn7vu8ijj31c00u0jws.jpg)





